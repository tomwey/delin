<!--
  Generated template for the AgencyPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

  <ion-navbar>
    <ion-title>委托事项</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="newEvent();">
        <ion-icon name="add"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

  <div class="sub-navbar">
    <ion-row>
      <ion-col col-6>
        <div class="menu-item" [class.active]="selectedIndex === 1" tappable (tap)="selectMenu(0);">
          委托我的
        </div>
      </ion-col>
      <ion-col col-6>
        <div class="menu-item" [class.active]="selectedIndex === 0" tappable (tap)="selectMenu(1);">
            我委托的
        </div>
      </ion-col>
    </ion-row>
  </div>

</ion-header>

<ion-content>
  <div class="empty-error-box" *ngIf="needShowErrorOrEmptyMsg">
    <p>{{errorOrEmptyMsg}}</p>
  </div>
  <ion-list *ngIf="dataList.length > 0">
    <button ion-item detail-none *ngFor="let item of dataList" 
      (click)="expandItem(item);" class="custom-item">
      <ion-avatar item-left>
        <img [src]="item.DelegateToHeadUrl">
      </ion-avatar>
      <h2>{{item.DelegateTo}}</h2>
      <p>
        {{item.DelegateTime}}
      </p>
      <accordion-list [expanded]="item.expanded" [expandedHeight]="itemHeight">
        <div class="tasks-list">
          <h4>委托任务清单</h4>
          <ul *ngIf="item.FormList.length > 0">
            <li *ngFor="let obj of item.FormList">{{obj.FormName}}</li>
            <!-- <li>同行转账</li>
            <li>项目资金支付</li> -->
          </ul>
        </div>
      </accordion-list>
      <ion-note item-right>
        <ion-icon name="{{item.expanded ? 'ios-arrow-down-outline' : 'ios-arrow-forward-outline'}}"></ion-icon>
      </ion-note>
    </button>
    
  </ion-list>
</ion-content>
