<!--
  Generated template for the ContactsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

  <ion-navbar hideBackButton="true">
    <ion-buttons start>
      <button ion-button icon-only (click)="back();">
        <ion-icon name="ios-arrow-round-back-outline" color="white"></ion-icon>
      </button>&emsp;
      <button ion-button icon-only (click)="backToRoot();" *ngIf="breadcrumb.breadcrumbs.length > 1">
        <ion-icon name="ios-close-outline" color="white"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>通讯录</ion-title>
    <ion-buttons end>
      <button ion-button *ngIf="!!formControl" (click)="confirm();">
        确定
      </button>
    </ion-buttons>
  </ion-navbar>

  <div class="sub-navbar">
    <!-- <ion-toolbar color="white-color">
      <ion-searchbar placeholder="搜索"></ion-searchbar>
    </ion-toolbar> -->
    
    <div class="breadcrumb-container">
      <ion-scroll scrollX="true" class="breadcrumb">
        <span *ngFor="let b of breadcrumb.breadcrumbs; let i = index;">
          <span class="breadcrumb-item" [class.active]="b.current === 1" tappable (tap)="forwardTo(b);">{{b.name}}</span>
          <ion-icon name="ios-arrow-forward-outline" *ngIf="b.current === 0"></ion-icon>
        </span>
      </ion-scroll>
    </div>

  </div>

</ion-header>

<ion-content class="content">
  <error-empty-message-box [data]="dataList" [error]="error" [needShow]="!loading"></error-empty-message-box>
  <ion-list></ion-list>
  <ion-list>
    <button ion-item *ngFor="let item of deptData" (click)="gotoContacts(item);">
      <button ion-button icon-only item-left *ngIf="selectionType === 10" clear (click)="selectDept($event, item);">
        <ion-icon name="{{ item.selected ? 'ios-radio-button-on-outline' : 'ios-radio-button-off-outline' }}"></ion-icon>
      </button>  
      
      <h2>{{item.ObjName}}</h2>
      <!-- <ion-note item-right>412</ion-note> -->
    </button>
  </ion-list>
  <ion-list *ngIf="selectionType !== 10">
    <button ion-item *ngFor="let person of manData" (click)="gotoManInfo(person);">
      <button ion-button clear icon-only *ngIf="selectionType === 9" item-left (click)="selectMan($event,person)">
        <ion-icon name="{{ person.selected ? 'ios-radio-button-on-outline' : 'ios-radio-button-off-outline' }}"></ion-icon>
      </button>

      <ion-avatar item-left>
        <img [src]="person.ObjHeadImg">
      </ion-avatar>
      <h2>{{person.ObjName}}</h2>
    </button>
  </ion-list>
</ion-content>
